# File类与IO流

## File类

- `java.io.File`类：文件和目录路径名的抽象表示形式。Java把电脑中的文件和文件夹（目录）封装为了一个File类，可以使用File类对文件和文件夹进行操作。

  File类是一个**与系统无关的类**，任何的操作系统都可以使用这个类中的方法。

  File类中的一些方法：

  - 创建一个文件/文件夹
  - 删除文件/文件夹
  - 获取文件/文件夹
  - 判断文件/文件夹是否存在
  - 对文件夹进行遍历
  - 获取文件的大小

  `file`：文件

  `directory`：文件夹/目录

  `path`：路径

- File类的静态成员变量

  1. `static String pathSeparator`：与系统有关的路径分隔符
  2. `static char pathSeparatorChar`：与系统有关的路径分隔符
  3. `static String separator`：与系统有关的默认名称分割符
  4. `static char separatorChar`：与系统有关的默认名称分割符

  - 路径分隔符 Windows ：分号； Linux：冒号：

    文件名称分隔符 Windows：反斜杠\	Linux：正斜杠/

- 绝对路径和相对路径

  1. 绝对路径：是一个完整的路径。

     以盘符开始的路径

  2. 相对路径：是一个简化的路径。

     相对指的是相对于当前项目的根目录。

     如果使用当前项目的根目录，路径可以简化书写。

  【注意】

  1. 路径是不区分大小写
  2. 路径中的文件名称分隔符Windows使用的反斜杠，反斜杠是转义字符，两个反斜杠代表一个普通的反斜杠。

- File类的【构造方法】

  1. `File(String pathname)`通过将给定路径名字符串转换为抽象路径来创建一个新的File实例。

     参数：

     ​		`String pathname`：字符串的路径名称

     ​		路径可以是以文件结尾，也可以是以文件夹结尾

     ​		路径可以是相对路径，也可以是绝对路径

     ​		路径可以存在，也可以是不存在

     ​		创建`File`对象，只是把字符串路径封装为`File`对象，不考虑路径的真假情况。

  2. `File(String parent,String child)`根据`parent`路径名字符串和`child`路径名字符串创建一个新的`File`实例。

     参数：把路径分成了两部分

     ​		`String parent`：父路径

     ​		`String child`：子路径

     优点：

     ​		父路径和子路径，可以单独书写，使用起来非常灵活。

  3. `File(File parent,String child)`：根据`parent`抽象路径和`child`路径名字符串创建一个新的`File`实例。

     参数：把路径分为两部分

     ​		`File parent`：父路径

     ​		`String child`：子路径

     优点：

     ​		父路径和子路径，可以单独书写，使用起来非常灵活；

     ​		父路径是`File`类型，可以使用`File`的方法对路径进行一些操作，再使用路径创建对象。

- File类【获取功能】的方法

  1. `public String getAbsolutePath()`：返回此File的绝对路径名字符串。

     获取构造方法中传递的路径，无论路径是绝对还是相对，该方法最终返回的都是据对路径。

  2. `public String getPath()`：将此File转换为路径名字符串。

     获取构造方法中传递的路径。

  3. `public String getName()`：返回由此File表示的文件或目录的名称。

     获取的就是构造方法传递路径的结尾部分（文件/文件夹）。

  4. `public long length()`：返回由此File表示的文件的长度。

     获取的是构造方法指向的文件的大小，以字节为单位。

     【注意】：

     1. 文件夹是没有大小概念的，不能获取文件夹的大小。
     2. 如果构造方法中给出的路径不存在，那么length方法返回0。

- File类【判断功能】的方法

  1. `public boolean exists()`：此File表示的文件或目录是否实际存在。

  2. `public boolean isDirectory`：此File表示的是否为目录。

  3. `public boolean isFile`：此File表示的是否是文件。

     方法2和方法3【注意】

     1. 电脑的硬盘中只有文件/文件夹，两个方法是互斥的。
     2. 这两个方法使用前提，路径必须是存在的，否则都返回false。

- File类【创建删除功能】的方法

  1. `public boolean createNewFile()`：当且仅当具有该名称的文件尚不存在时，创建一个新的空文件。

     创建文件的路径和名称在构造方法中给出（构造方法的参数）。

     返回值：布尔值

     ​	true：文件不存在，创建文件，返回true

     ​	false：文件存在，不会创建，返回false

     【注意】：

     1. 此方法只能创建文件，不能创建文件夹。
     2. 创建文件的路径必须存在，否则会抛出异常。

  2. `public boolean delete()`：删除由此File表示的文件或者目录。

     此方法，可以删除构造方法路径中给出的文件/文件夹。

     返回值：布尔值

     ​	true：文件/文件夹删除成功，返回true

     ​	false：文件夹中有内容，不会删除，返回false；构造方法中给出的路径不存在，返回false。

     【注意】：

     ​	delete方法是直接在硬盘删除文件/文件夹，不走回收站，删除需谨慎！！!

  3. `public boolean mkdir()`：创建由此File表示的目录。

     创建单级文件夹。

  4. `public boolean mkdirs()`：创建由此File表示的目录，包括任何必须但不存在的父目录。

     既可以创建单级文件夹，也可以创建多级文件夹。

     创建文件夹的路径和名称在构造方法中给出（构造方法的参数）。

     返回值：布尔值

     ​	true：文件夹不存在，创建文件，返回true

     ​	false：文件夹存在，不会创建，返回false；构造方法中给出的路径不存在，返回false。

- File类【遍历目录功能】

  1. `public String[] list()`：返回一个String数组，表示该File目录中所有子文件或目录。

     遍历构造方法中给出的目录，会获取目录中所有文件/文件夹的名称，把获取到的多个名称存储到一个String类型的数组中。

     隐藏文件/文件夹也能获取到。

  2. `public File[] listFiles()`：返回一个File数组，表示该File目录中的所有的子文件或目录。

     遍历构造方法中给出的目录，会获取目录中所有文件/文件夹，把文件/文件夹封装为File对象，多个File对象存储到File数组中。

     【注意】：

     1. `list`方法和`listFiles`方法遍历的是构造方法中给出的目录。
     2. 如果构造方法中给出的目录的路径不存在，会抛出空指针异常。
     3. 如果构造方法中给出的路径不是一个目录，也会抛出空指针异常。

## 递归

- 相关基础

  - 递归：指在当前方法内调用自己的这种现象。

  - 分类：

    - 直接递归

      直接递归称为方法自身调用自己。

    - 间接递归

      间接递归可以A方法调用B方法，B方法调用C方法，C方法调用A方法。

  - 【注意事项】
    1. 递归一定要有条件限定，保证递归能够停下来，否咋会发生栈内存溢出。
    2. 在递归中虽然有限定条件，但是递归次数也不能太多，否咋也会发生栈内存溢出。
    3. **构造方法，禁止递归。**

  - 递归的【使用前提】：

    当调用方法的时候，方法的主体不变，每次调用方法的参数不同，可以使用递归。

## 过滤

在`File`类中，有两个`ListFiles`重载的方法，方法的参数传递的就是过滤器。

1. `File[] listFiles(FileFilter filter)`

   `java.io.FileFilter`接口：用于抽象路径名（`File`对象）的过滤器。

   【作用】:
   	用来过滤文件（`File`对象）。

   【抽象方法】：用来过滤文件的方法。

   ​	`boolean accept(File pathname)`测试指定抽象路径名是否应该包含在某个路径列表中。

   ​	参数：

   ​			`File pathname`：使用`ListFiles`方法遍历目录，得到的每一个文件对象。

2. `File[] listFiles(FilenameFilter filter)`

   `java.io.FilenameFilter`接口：实现此接口的类实例可用于过滤文件名。

   【作用】：

   ​	用于过滤文件名称。

   【抽象方法】：

   ​	`boolean accept(File dir,String name)`测试指定文件是否包含在某一文件列表中。

   ​	参数：

   ​		`File dir`：构造方法中传递的被遍历的目录。

   ​		`String name`：使用`ListFiles`方法遍历目录，获取的每一个文件/文件夹的名称。

3. 【注意】：
   两个过滤器接口是没有实现类的，需要自己写实现类，重写过滤的方法`accept`，在方法中自己定义过滤的规则。

## IO字节流

**顶级父类**

|        |             输入流             |             输出流              |
| :----: | :----------------------------: | :-----------------------------: |
| 字节流 | 字节输入流<br/>**InputStream** | 字节输出流<br/>**OutputStream** |
| 字符流 |   字符输入流<br/>**Reader**    |    字符输出流<br/>**Writer**    |

- 字节输出流【**`OutputStream`**】

  `java.io.OutputStream`：此抽象类是表示输出字节流的所有类的超类。

  - 定义了一些子类共性的成员方法：

    |                     名称                      |                           描述                           |
    | :-------------------------------------------: | :------------------------------------------------------: |
    |             `public void close()`             |      关闭此输出流并释放与此流相关联的任何系统资源。      |
    |             `public void flush()`             |       刷新此输出流并强制任何缓冲的输出字节被写出。       |
    |         `public void write(byte[] b)`         |      将`b.length`字节从指定的字节数组写入此输出流。      |
    | `public void write(byte[] b,int off,int len)` | 从指定的字节数组从偏移量off开始的len个字节写入此输出流。 |
    |      `public abstract void write(int b)`      |                将指定的字节写入此输出流。                |

  - 写入数据的原理（内存-->硬盘）

    **Java程序-->JVM（Java虚拟机）-->OS（操作系统）-->OS调用写数据的方法-->把数据写入到文件中。**

- 文件字节输出流【**`FileOutputStream`**】

  - 【作用】：


  ​		把内存中的数据写入到硬盘的文件中。

  - 【构造方法】：


  ​		`FileOutputStram(String name)`：创建一个向具有指定名称的文件中写入数据的文件输出流。

  ​		`FileOutputStream(File file)`：创建一个向指定`File`对象表示的文件中写入数据的文件输出流。

  ​		参数：

  ​				`String name`：目的地是一个文件的路径。

  ​				`File file`：目的地是一个文件。

  ​		构造方法的作用：

  ​				1.创建一个`FileOutputStream`对象。

  ​				2.会根据构造方法中传递的文件/文件路径，创建一个空的文件。

  ​				3.会把`FileOutputStream`对象指向创建号的文件。

  - 【字节输出流的==**使用步骤**==】：
    1. 创建一个`FileOutputStream`对象，构造方法中传递写入数据的目的地。
    2. 调用`FileOutputStream`对象中的方法`Write`，把数据写入到文件中。
    3. 释放资源。

- 一次【写入**多个字节**】

  1. `public void write(byte[] b)`

     【注意】：

     1. 如果写的第一个字节是整数（0-127），那么显示的时候会查询ASCII码表。
     2. 如果写的第一个字节是负数，那么第一个字节会和第二个字节，两个字节组成一个中文显示，查询系统默认码表（GBK）。

  2. `public void write(byte[] b,int off,int len)`

     把字节数组的一部分写入到文件中。

  3. 通过写入字符的方法：可以使用`String`类中的方法把字符串，转换为字节数组。

     `byte[] getBytes()`：把字符串转换为字节数组。

- 字节输出流的【**续写和换行**】

  - 追加写/续写：使用两个参数的构造方法。

    `FileOutputStream(String name,boolean append)`：创建一个向具有指定`name`的文件写入数据的输出文件流。

    `FileOutputStream(File file,boolean append)`：创建一个向指定`File`对象表示的文件中写入数据的文件输出流。

    【参数】：

    ​		`String name,File file`：写入数据的目的地

    ​		`boolean append`：追加写开关。`true`：创建对象不会覆盖原文件，继续在文件的末尾追加写数据；`false`：创建一个新文件，覆盖原文件。

  - 换行：写换行符号。
    1. `Windows`：`\r\n`
    2. `linux`：`/n`
    3. `mac`：`/r`

------

- 字节输入流【**`InputStream`**】

  `java.io.InputStream`：此抽象类是表示字节输入流的所有类的超类。

  |            名称             |                             描述                             |
  | :-------------------------: | :----------------------------------------------------------: |
  |    `public void close()`    |        关闭此输入流并释放与此流相关联的任何系统资源。        |
  |     `public int read()`     | 从输入流中读取数据的下一个字节。（**读取到文件的末尾返回-1**） |
  | `public int read(byte[] b)` | 从输入流中读取一定数量的字节，并将其存储在缓冲区数组`b`中。  |

  - 读取数据的原理（硬盘-->内存）

    **Java程序-->JVM（Java虚拟机）-->OS（操作系统）-->OS调用读取数据的方法-->读取文件。**

- 文件字节输入流【**`FileInputStream`**】

  - 【作用】:

  ​		把硬盘文件中的数据，读取到内存中使用。

  - 【构造方法】：

  ​		`FileInputStream(String name)`

  ​		`FileInputStream(File file)`

  ​		参数：读取文件的数据源。

  ​				`String name`：文件的路径。

  ​				`File file`：文件。

  - 【构造方法的作用】：

  ​		1.会创建一个`FileInputStream`对象。

  ​		2.会把`FileInputStream`对象指向构造方法中要读取的文件。

  - 【字节输入流的**==使用步骤==**】：
    1. 创建`FileInputStream`对象，构造方法中绑定要读取的数据源。
    2. 使用`FileInputStream`对象中的方法`read`，读取文件。
    3. 释放资源。

- 一次【读取**多个字节**】

  `int read(byte[] b)`

  参数：

  ​		`byte[]`：起到缓冲的作用，存储每次读取到的多个字节；数组的长度一般定义为1024（1kb）或者1024的整数倍。

  ​		方法的返回值`int`：每次读取的有效字节个数。

- **字节流读取文件时，遇到中文字符时，可能不能显示完整的字符，因为一个中文字符可能占用多个字节存储。**

## 字符流

- 字符输入流【**`Reader`**】

  `java.io.Reader`：字符输入流，是字符输入流的最顶层的父类，定义了一些共性的成员方法，是一个**抽象类**。

  -  定义了一些子类共性的成员方法：

    | 方法                    | 描述                                 |
    | :---------------------- | :----------------------------------- |
    | `int read()`            | 读取单个字符并返回。                 |
    | `int read(char[] cbuf)` | 一次读取多个字符，将字符读入数组。   |
    | `void close()`          | 关闭该流并释放与之相关联的所有资源。 |

- 文件字符输入流【**`FileReader`**】

  - 【作用】：

  ​		把硬盘文件中的数据以字符的方式读取到内存中。

  - 【构造方法】：

  ​		`FileReader(String filename)`

  ​		`FileReader(File file)`

  ​		参数：读取文件的数据源

  ​				`String filename`：文件的路径

  ​				`File file`：一个文件

  ​		构造方法的作用：

  ​				1.创建一个`FileReader`对象。

  ​				2.会把`FileReader`对象指向要读取的文件。

  - 字符输入流的【**==使用步骤==**】
    1. 创建`FileReader`对象，构造方法中绑定要读取的数据源。
    2. 使用`FileReader`对象中的方法`read`读取文件。
    3. 释放资源。

------

- ​	字符输出流【**`Writer`**】

  `java.io.Writer`：字符输出流，是所有字符输出流的最顶层的父类，是一个**抽象类**。

- 文件字符输出流【**`FileWriter`**】

  - 【作用】：

  ​		把内存中字符数据写入到文件中。

  - 【构造方法】：

  ​		`FileWriter(File file)`：根据给定的`File`对象构造一个`FileWriter`对象。

  ​		`FileWriter(String filename)`：根据给定的文件名构造一个`FileWriter`对象。

  ​		参数：写入数据的目的地。

  ​				`String filename`：文件的路径。

  ​				`File file`：是一个文件。

  ​		构造方法的作用：

  ​				1.会创建一个`FileWriter`对象。

  ​				2.会根据构造方法中传递的文件/文件的路径，创建文件。

  ​				3.会把`FileWriter`对象指向创建好的文件。

  - 【字符输出流的**==使用步骤==**】
    1. 创建`FileWriter`对象，构造方法中绑定要写入数据的目的地。
    2. 使用`FileWriter`对象中的方法`write`，把数据写入到**内存缓冲区**中（字符转换为字节的过程）。
    3. 使用`FileWriter`中的方法`flush`，把内存缓冲区中的数据，刷新到文件中。
    4. 释放资源（会先把内存缓冲区中的数据刷新到文件中）。

- `flush`方法和`close`方法
  1. `flush`方法：刷新缓冲区，流对象可以继续使用。
  2. `close`方法：先刷新缓冲区，然后通知系统释放资源。流对象不可以再被使用了。

- 字符输出流写数据的【其他方法】

  







​		



