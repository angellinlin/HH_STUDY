### 3.4.6 Lambda表达式

面向对象的思想：做一件事情，找一个能解决这个事情的对象，调用对象的方法完成事情。

函数式编程思想：只要能获取到结果，谁去做，怎么做的都不重要，重视结果，不重视过程。

 

#### 一、Lambda表达式的标准格式

由三部分组成。
   A.一些参数
   B.一个箭头
   C.一段代码
 格式：***（参数列表）\******-> {\******一些重写方法的代码};
\*** 解释说明：
 ()：接口中抽象方法的参数列表。没有参数就空着，有参数就写出参数，多个参数使用逗号分隔
 ->：传递的意思，把参数传递给方法体{}
 {}：重写接口的抽象方法的方法体

 

#### 二、例子

Eg1:多线程的实现

```
//使用匿名内部类实现多线程
new Thread(new Runnable() {
    @Override
    public void run() {
        System.out.println(Thread.currentThread().getName());
    }
}).start();

//使用Lambda表达式实现多线程
new Thread(() -> {
    System.out.println(Thread.currentThread().getName());
}).start();
```

 

```
//优化省略Lambda
new Thread(() -> 
    System.out.println(Thread.currentThread().getName())).start();
```

 

 

 

Eg2: 需求：
 给定一个厨子接口，内含唯一的抽象方法makeFood，且无参数，无返回值。
 使用Lambda的标准格式调用invokeCook方法。打印输出“吃饭啦！”

```
//调用invokeCook方法，参数：Cook接口，可传递匿名内部类
invokeCook(new Cook() {
    @Override
    public void mameFook() {
        System.out.println("吃饭啦！");
    }
});

//使用Lambda的标准格式简化匿名内部类的书写
invokeCook(() -> {
    System.out.println("吃饭啦！");
});
```

 

Eg3: Lambda表达式有参数有返回值练习
 需求：
   使用数组存储多个Person对象
   对数组中的Person对象Arrays的sort方法进行升序排列

 

 

```
Person[] arr = {new Person("孙尚香", 18),
         new Person("芈月", 21),
         new Person("王昭君", 20)};
 //升序排序,前-后
Arrays.sort(arr, new Comparator<Person>() {
     @Override
     public int compare(Person o1, Person o2) {
         return o1.getAge()-o2.getAge();
     }
 });

 //使用Lambda表达式简化匿名内部类
 Arrays.sort(arr, (Person o1, Person o2)->{
     return o1.getAge()-o2.getAge();
 });
 
//优化省略Lambda
Arrays.sort(arr, (o1, o2)->
     o1.getAge()-o2.getAge()
);
```

 

Eg4：有参数有返回值：

```
//调用invokeCalculator方法
invokeCalculator(num1, num2, new Calculator() {
    @Override
    public int calc(int a, int b) {
        return a+b;
    }
});

//使用lambda表达式简化匿名内部类的代码
invokeCalculator(num1,num2,(int a,int b)->{
    return a+b;
});
//省略lambda写法
invokeCalculator(num1,num2,(a,b)-> a+b);
```

 

#### 三、Lambda表达式的省略式

Lambda表达式：可推导，可省略
 凡是根据上下文推导出来的内容，都可以省略书写。
 可以省略的内容：
   1、(参数列表)：括号中参数列表的数据类型可以省略不写
   2、(参数列表)：括号中的参数如果只有一个，那么类型和括号都可以省略
   3、{一些代码}：如果{}中的代码只有一行，无论是否有返回值，那么都可以省略({},return,分号)
     注意：{},return,分号必须一起省略

 

#### 四、Lambda的使用前提

1、使用Lambda必须有接口，且要求接口中**有且只有一个抽象方法**。

2、使用Lambda必须具有**上下文推断**。

也就是方法的参数或局部变量类型必须为Lambda提供对应的接口类型，才能使用Lambda作为该接口的实例。

备注：有且仅有一个抽象方法的接口称之为，**函数式接口**